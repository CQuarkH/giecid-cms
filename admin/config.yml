backend:
  # En local usamos esto, en producción cambiarás a 'github'
  name: git-gateway
  branch: main

media_folder: "assets/images/uploads"
public_folder: "/assets/images/uploads"

# Configuración del idioma de la interfaz
locale: "es"

collections:
  # 1. PUBLICACIONES (Archivos .md en _publications)
  - name: "publications"
    label: "Publicaciones"
    folder: "_publications"
    create: true
    slug: "{{year}}-{{slug}}"
    fields:
      - { label: "Título", name: "title", widget: "string" }

      # Nuevos campos solicitados
      - {
          label: "Autores",
          name: "authors",
          widget: "string",
          hint: "Ej: Valenzuela, P., Pérez, J.",
        }
      - {
          label: "Revista o Conferencia",
          name: "venue",
          widget: "string",
          hint: "Ej: Revista Chilena de Educación",
        }

      - { label: "Fecha", name: "date", widget: "datetime" }
      - { label: "Resumen (Abstract)", name: "excerpt", widget: "text" }

      # Campos opcionales útiles
      - {
          label: "DOI",
          name: "doi",
          widget: "string",
          required: false,
          hint: "Ej: 10.1016/j.chb.2023.107777",
        }
      - {
          label: "PDF o Enlace",
          name: "pdf_url",
          widget: "string",
          required: false,
        }

      - { label: "Cuerpo", name: "body", widget: "markdown" }

  # COLECCIÓN 2: Proyectos (Tipo FILES: edita una lista dentro de un archivo .yml)
  - name: "data_projects"
    label: "Proyectos"
    delete: false
    files:
      - name: "projects"
        label: "Lista de Proyectos"
        file: "_data/projects.yml"
        fields:
          - label: "Proyectos"
            name: "projects"
            widget: "list"
            fields:
              - { label: "Nombre del Proyecto", name: "name", widget: "string" }

              # --- NUEVOS CAMPOS ---
              - {
                  label: "Fuente de Financiamiento",
                  name: "funding_source",
                  widget: "string",
                  hint: "Ej: ANID Fondecyt Regular Nº 123456",
                }
              - {
                  label: "Equipo / Miembros",
                  name: "members",
                  widget: "string",
                  hint: "Ej: Soto, A., Pérez, J. (Investigador Principal)",
                }
              # ---------------------

              - { label: "Año Inicio", name: "year_start", widget: "number" }
              - {
                  label: "Año Fin",
                  name: "year_end",
                  widget: "number",
                  required: false,
                }
              - { label: "Descripción", name: "description", widget: "text" }

              # --- LINK ---
              - {
                  label: "Enlace del Proyecto",
                  name: "url",
                  widget: "string",
                  required: false,
                }

  # COLECCIÓN 3: Miembros (Tipo FOLDER para tener páginas de detalle)
  - name: "members"
    label: "Equipo"
    folder: "_members"
    create: true
    slug: "{{slug}}"
    fields:
      - { label: "Nombre", name: "title", widget: "string" } # Jekyll usa 'title' para el nombre principal
      - { label: "Rol/Cargo", name: "role", widget: "string" }
      - {
          label: "Orden",
          name: "order",
          widget: "number",
          value_type: "int",
          default: 10,
        }
      - { label: "Foto", name: "photo", widget: "image", required: false }
      - { label: "Email", name: "email", widget: "string", required: false }
      - {
          label: "Google Scholar ID",
          name: "scholar",
          widget: "string",
          required: false,
          hint: "Solo el ID, ej: qU5-8O0AAAAJ",
        }
      - {
          label: "Biografía Completa",
          name: "body",
          widget: "markdown",
          required: false,
        }

  # COLECCIÓN 4: Configuración del Sitio (Tipo FILES)
  - name: "config"
    label: "Configuración General"
    files:
      - name: "about"
        label: "Sobre Nosotros"
        file: "_data/about.yml"
        fields:
          - {
              label: "Título",
              name: "title",
              widget: "string",
              default: "Sobre Nosotros",
            }
          # Usamos 'markdown' para que puedas poner negritas, listas y párrafos
          - { label: "Contenido", name: "content", widget: "markdown" }
      - name: "contact"
        label: "Datos de Contacto y Ubicación"
        file: "_data/contact_data.yml"
        fields:
          # --- CAMPOS PROTEGIDOS (Widget hidden mantiene el dato sin mostrarlo) ---
          - { label: "Nombre Grupo", name: "group_name", widget: "hidden" }
          - { label: "Nombre Completo", name: "full_name", widget: "hidden" }
          - { label: "Descripción", name: "description", widget: "hidden" }

          # --- DATOS EDITABLES ---
          - {
              label: "Email de Contacto",
              name: "contact_email",
              widget: "string",
            }
          - {
              label: "Teléfono",
              name: "phone",
              widget: "string",
              required: false,
            }
          - { label: "Institución", name: "institution", widget: "string" }
          - { label: "Dirección", name: "address", widget: "string" }

          # --- CÓMO LLEGAR (Lista de puntos) ---
          - label: "Cómo llegar (Instrucciones)"
            name: "arrival_instructions"
            widget: "list"
            summary: "{{fields.instruction}}"
            fields:
              - { label: "Instrucción", name: "instruction", widget: "string" }

          # --- MAPA (Coordenadas) ---
          - label: "Coordenadas del Mapa"
            name: "location"
            widget: "object"
            fields:
              - {
                  label: "Latitud",
                  name: "lat",
                  widget: "number",
                  value_type: "float",
                  hint: "Ej: -38.7359",
                }
              - {
                  label: "Longitud",
                  name: "lng",
                  widget: "number",
                  value_type: "float",
                  hint: "Ej: -72.5904",
                }

  # COLECCIÓN 5: Noticias (Tipo FOLDER para tener páginas de detalle)
  - name: "news"
    label: "Noticias"
    folder: "_news"
    create: true
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"
    fields:
      - { label: "Título", name: "title", widget: "string" }
      - { label: "Fecha", name: "date", widget: "datetime" }
      - {
          label: "Imagen Destacada",
          name: "image",
          widget: "image",
          required: false,
          hint: "Imagen principal de la noticia",
        }
      - {
          label: "Resumen",
          name: "excerpt",
          widget: "text",
          required: false,
          hint: "Breve resumen de la noticia (se mostrará en el listado)",
        }
      - {
          label: "Categoría",
          name: "category",
          widget: "select",
          options:
            [
              "Investigación",
              "Eventos",
              "Publicaciones",
              "Noticias",
              "Proyectos",
            ],
          default: "Noticias",
        }
      - { label: "Contenido", name: "body", widget: "markdown" }
